(function(e){function t(t){for(var n,s,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"06d1":function(e,t,a){},"0852":function(e,t,a){e.exports=a.p+"img/login_bg.ec9bf219.jpg"},"0afb":function(e,t,a){},"0c0f":function(e,t,a){"use strict";var n=a("128b"),i=a.n(n);i.a},"128b":function(e,t,a){},3376:function(e,t,a){"use strict";var n=a("0afb"),i=a.n(n);i.a},"49fd":function(e,t,a){"use strict";var n=a("cada"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],s={name:"App"},r=s,l=a("2877"),c=Object(l["a"])(r,i,o,!1,null,null,null),u=c.exports,d=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-form-wrap"},[e._m(0),a("el-form",{ref:"login-form",staticClass:"login-form",attrs:{rules:e.formRules,model:e.user}},[a("el-form-item",{attrs:{prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1),a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}})],1),a("el-form-item",{attrs:{prop:"agree"}},[a("el-checkbox",{model:{value:e.user.agree,callback:function(t){e.$set(e.user,"agree",t)},expression:"user.agree"}},[e._v("我已阅读并同意用户协议和隐私条款")])],1),a("el-form-item",[a("el-button",{staticClass:"login-btn",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.onLogin}},[e._v("登录")])],1)],1)],1)])},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-head"},[a("div",{staticClass:"logo"})])}],f=a("bc3a"),g=a.n(f),h=a("d604"),v=a.n(h),b=g.a.create({baseURL:"http://ttapi.research.itcast.cn/",transformResponse:[function(e){try{return v.a.parse(e)}catch(t){return e}}]});b.interceptors.request.use((function(e){var t=JSON.parse(window.localStorage.getItem("user"));return t&&(e.headers.Authorization="Bearer ".concat(t.token)),e}),(function(e){console.log(e)}));var _=b,w=function(e){return _({method:"POST",url:"/mp/v1_0/authorizations",data:e})},y=function(){return _({method:"GET",url:"/mp/v1_0/user/profile"})},x=function(e){return _({method:"PATCH",url:"/mp/v1_0/user/photo",Headers:{"Content-Type":"multipart/form-data"},data:e})},C=function(e){return _({method:"PATCH",url:"/mp/v1_0/user/profile",data:e})},$={name:"LoginIndex",components:{},props:{},data:function(){return{user:{mobile:"13911111111",code:"246810",agree:!0},loginLoading:!1,formRules:{mobile:[{required:!0,message:"请输入手机号",trigger:"change"},{pattern:/^1[3|5|7|8|9]\d{9}$/,message:"请输入正确的号码格式",trigger:"change"}],code:[{required:!0,message:"验证码不能为空",trigger:"change"},{pattern:/^\d{6}$/,message:"请输入正确的验证码格式"}],agree:[{validator:function(e,t,a){t?a():a(new Error("请同意用户协议"))},trigger:"change"}]}}},methods:{onLogin:function(){var e=this;this.$refs["login-form"].validate((function(t){t&&e.login()}))},login:function(){var e=this;this.loginLoading=!0,w(this.user).then((function(t){console.log(t),e.$message({message:"登录成功",type:"success"}),window.localStorage.setItem("user",JSON.stringify(t.data.data)),e.$router.push({name:"home"}),e.loginLoading=!1})).catch((function(t){console.log("登录失败",t),e.$message.error("登录失败，手机号或验证码错误"),e.loginLoading=!1}))}}},k=$,S=(a("3376"),Object(l["a"])(k,p,m,!1,null,"70ce5f2e",null)),j=S.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("首页")])},E=[],z={},A=z,T=Object(l["a"])(A,O,E,!1,null,null,null),V=T.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"layout-container"},[a("el-aside",{staticClass:"aside",attrs:{width:"auto"}},[a("app-aside",{staticClass:"aside-menu",attrs:{"is-collapse":e.isCollapse}})],1),a("el-container",[a("el-header",{staticClass:"header"},[a("div",{staticClass:"header-container"},[a("div",[a("i",{staticClass:"el-icon-s-fold",on:{click:function(t){e.isCollapse=!e.isCollapse}}}),e._v(" 江苏传智播客有限公司 ")]),a("el-dropdown",[a("div",{staticClass:"avatar-wrap"},[a("img",{staticClass:"avatar",attrs:{src:e.user.photo,alt:""}}),a("span",[e._v(e._s(e.user.name))]),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[e._v("设置")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.olginout(t)}}},[e._v("退出")])],1)],1)],1)]),a("el-main",{staticClass:"main"},[a("router-view")],1)],1)],1)},L=[],P=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"/","background-color":"#002033","text-color":"#fff",router:"",collapse:e.isCollapse,"active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"el-icon-s-home"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),a("el-menu-item",{attrs:{index:"/active"}},[a("i",{staticClass:"iconfont icon-l-order"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("内容管理")])]),a("el-menu-item",{attrs:{index:"/image"}},[a("i",{staticClass:"iconfont icon-image"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("素材管理")])]),a("el-menu-item",{attrs:{index:"/publish"}},[a("i",{staticClass:"iconfont icon-publish"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("发布文章")])]),a("el-menu-item",{attrs:{index:"/commit"}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("评论管理")])]),a("el-menu-item",{attrs:{index:"/fans"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("粉丝管理")])]),a("el-menu-item",{attrs:{index:"/setting"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("个人设置")])])],1)}),U=[],R={props:["is-collapse"]},q=R,N=(a("0c0f"),Object(l["a"])(q,P,U,!1,null,"2ac9c4d2",null)),B=N.exports,I=new n["default"],M={name:"index",data:function(){return{user:{},isCollapse:!1}},components:{AppAside:B},created:function(){var e=this;this.getUserProfile(),I.$on("user",(function(t){e.user.name=t.name,e.user.photo=t.photo}))},methods:{getUserProfile:function(){var e=this;y().then((function(t){e.user=t.data.data}))},olginout:function(){var e=this;this.$confirm("是否退出登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.localStorage.removeItem("user"),e.$router.push("/login"),e.$message({type:"success",message:"退出成功!"})})).catch((function(){e.$message({type:"info",message:"已取消退出"})}))}}},H=M,G=(a("fc03"),Object(l["a"])(H,D,L,!1,null,"d6366aa4",null)),J=G.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v("内容管理")])],1)],1),n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"40px",size:"mini"}},[n("el-form-item",{attrs:{label:"状态"}},[n("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("el-radio",{attrs:{label:null}},[e._v("全部")]),n("el-radio",{attrs:{label:0}},[e._v("草稿")]),n("el-radio",{attrs:{label:1}},[e._v("待审核")]),n("el-radio",{attrs:{label:2}},[e._v("审核通过")]),n("el-radio",{attrs:{label:3}},[e._v("审核失败")]),n("el-radio",{attrs:{label:4}},[e._v("已删除")])],1)],1),n("el-form-item",{attrs:{label:"频道"}},[n("el-select",{attrs:{placeholder:"请选择频道"},model:{value:e.ActivechannelsId,callback:function(t){e.ActivechannelsId=t},expression:"ActivechannelsId"}},e._l(e.Activechannels,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00"],format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",disabled:e.isdisabled},on:{click:function(t){return e.loadActive(1)}}},[e._v("查询")])],1)],1)],1),n("el-card",{staticClass:"box-card clearfix-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("根据筛选条件查询到 "+e._s(e.totalcount)+" 条结果")])]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"list-table",staticStyle:{width:"100%"},attrs:{size:"mini",border:"",stripe:"",data:e.active}},[n("el-table-column",{attrs:{align:"center",prop:"cover",label:"封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-tag",[e.row.cover.images[0]?n("img",{staticClass:"ative-img",attrs:{src:e.row.cover.images[0],alt:""}}):n("img",{staticClass:"ative-img",attrs:{src:a("0852"),alt:""}})])]}}])}),n("el-table-column",{attrs:{prop:"title",label:"标题",align:"center"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{type:e.activestatus[t.row.status].type}},[e._v(" "+e._s(e.activestatus[t.row.status].text)+" ")])],1)]}}])}),n("el-table-column",{attrs:{align:"center",prop:"pubdate",label:"发布时间"}}),n("el-table-column",{attrs:{align:"center",prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){e.$router.push("/publish?id="+t.row.id.toString())}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.onDelet(t.row.id)}}})]}}])})],1),n("el-pagination",{attrs:{disabled:e.isdisabled,background:"",layout:"prev, pager, next",total:e.totalcount,"page-size":e.pagesize},on:{"current-change":e.oncurrent}})],1)],1)},K=[],Q=(a("d3b7"),a("25f0"),function(e){return _({method:"GET",url:"/mp/v1_0/articles",params:e})}),W=function(){return _({method:"GET",url:"/mp/v1_0/channels"})},X=function(e){return _({method:"DELETE",url:"/mp/v1_0/articles/".concat(e)})},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _({method:"POST",url:"/mp/v1_0/articles",params:{draft:t},data:e})},Z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _({method:"PUT",url:"/mp/v1_0/articles/".concat(e),params:{draft:a},data:t,Headers:{"Content-Type":"application/json"}})},ee=function(e){return _({method:"GET",url:"/mp/v1_0/articles/".concat(e),Headers:{"Content-Type":"application/json"}})},te=function(e,t){return _({method:"PUT",url:"/mp/v1_0/comments/status",params:{article_id:e},data:{allow_comment:t}})},ae={name:"activeindex",components:{},props:{},data:function(){return{form:{name:"",region:"",delivery:!1,type:[],resource:"",desc:""},active:[],activestatus:[{status:0,text:"草稿",type:"success"},{status:1,text:"待审核",type:"warning"},{status:2,text:"审核通过",type:""},{status:3,text:"审核失败",type:"info"},{status:4,text:"已删除",type:"danger"}],totalcount:0,pagesize:10,radio:null,Activechannels:[],ActivechannelsId:null,loading:!0,isdisabled:!1,fromDate:[]}},computed:{},watch:{},created:function(){this.loadActive(1),this.logetActivechannels()},mounted:function(){},methods:{loadActive:function(e){var t=this;this.isdisabled=!0,this.loading=!0,Q({page:e,per_page:10,status:this.radio,channel_id:this.ActivechannelsId,begin_pubdate:this.fromDate[0],end_pubdate:this.fromDate[1]}).then((function(e){var a=e.data.data,n=a.results,i=a.per_page,o=a.total_count;t.active=n,t.totalcount=o,t.pagesize=i,t.loading=!1,t.isdisabled=!1}))},oncurrent:function(e){this.loadActive(e)},logetActivechannels:function(){var e=this;W().then((function(t){e.Activechannels=t.data.data.channels}))},onDelet:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){X(e.toString()).then((function(t){console.log(e)}))})).catch((function(){t.$message({type:"info",message:"已删除"})}))}}},ne=ae,ie=(a("f9b2"),Object(l["a"])(ne,F,K,!1,null,"487c3538",null)),oe=ie.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v(e._s(e.$route.query.id?"修改文章":"发表文章"))])],1)],1),a("el-form",{ref:"publish-form",attrs:{model:e.active,rules:e.forRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.active.title,callback:function(t){e.$set(e.active,"title",t)},expression:"active.title"}})],1),a("el-form-item",{attrs:{label:"内容",prop:"conter"}},[a("el-tiptap",{attrs:{placeholder:"请输入内容",height:"400",extensions:e.extensions},model:{value:e.active.content,callback:function(t){e.$set(e.active,"content",t)},expression:"active.content"}})],1),a("el-form-item",{attrs:{label:"封面"}},[a("el-radio-group",{model:{value:e.active.cover.type,callback:function(t){e.$set(e.active.cover,"type",t)},expression:"active.cover.type"}},[a("el-radio",{attrs:{label:1}},[e._v("单图")]),a("el-radio",{attrs:{label:3}},[e._v("三图")]),a("el-radio",{attrs:{label:0}},[e._v("无图")]),a("el-radio",{attrs:{label:-1}},[e._v("自动")])],1),e.active.cover.type>0?e._l(e.active.cover.type,(function(t,n){return a("upload-cover",{key:t,model:{value:e.active.cover.images[n],callback:function(t){e.$set(e.active.cover.images,n,t)},expression:"active.cover.images[index]"}})})):e._e()],2),a("el-form-item",{attrs:{label:"频道",prop:"channel_id"}},[a("el-select",{attrs:{placeholder:"请选择频道"},model:{value:e.active.channel_id,callback:function(t){e.$set(e.active,"channel_id",t)},expression:"active.channel_id"}},e._l(e.Activechannels,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fabiao(!1)}}},[e._v("发表")]),a("el-button",{on:{click:function(t){return e.fabiao(!0)}}},[e._v("存入草稿")])],1)],1)],1)],1)},re=[],le=function(e){return _({method:"POST",url:"/mp/v1_0/user/images",Headers:{"Content-Type":"multipart/form-data"},data:e})},ce=function(e){return _({method:"GET",url:"/mp/v1_0/user/images",Headers:{"Content-Type":"application/json"},params:e})},ue=function(e,t){return _({method:"PUT",url:"/mp/v1_0/user/images/".concat(e),Headers:{"Content-Type":"application/json"},data:{collect:t}})},de=function(e){return _({method:"DELETE",url:"/mp/v1_0/user/images/".concat(e)})},pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"cover-wrap",on:{click:e.showCoverSelect}},[a("img",{ref:"cover-img",staticClass:"cover-img",attrs:{src:e.value,alt:""}})]),a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"选择封面",width:"50%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"素材库",name:"first"}},[a("image-a",{ref:"imagelist",attrs:{isShowadd:!1,isShowactive:!1,"is-show-selected":""}})],1),a("el-tab-pane",{attrs:{label:"上传图片",name:"second"}},[a("input",{ref:"file",attrs:{type:"file"},on:{change:e.onphoto}}),a("br"),a("img",{ref:"preview-imag",attrs:{src:"",alt:""}})])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.isloding},on:{click:e.oncover}},[e._v("确 定")])],1)],1)],1)},me=[],fe=(a("3ca3"),a("ddb0"),a("2b3d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sc"},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.onCollectChange(1)}},model:{value:e.collect,callback:function(t){e.collect=t},expression:"collect"}},[a("el-radio-button",{attrs:{label:"false"}},[e._v("全部")]),a("el-radio-button",{attrs:{label:"true"}},[e._v("收藏")])],1),e.isShowadd?a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传素材")]):e._e()],1),a("el-row",{attrs:{gutter:10}},e._l(e.images,(function(t,n){return a("el-col",{key:n,staticClass:"image-item",attrs:{lg:4,xs:12,md:6,sm:6},nativeOn:{click:function(t){e.select=n}}},[a("el-image",{staticStyle:{height:"100px"},attrs:{src:t.url,fit:"cover"}}),e.isShowSelected&&e.select===n?a("div",{staticClass:"select"}):e._e(),e.isShowactive?a("div",{staticClass:"image-action"},[a("el-button",{attrs:{size:"mini",type:"warning",icon:t.is_collected?"el-icon-star-on":"el-icon-star-off",loading:t.isloading,circle:""},on:{click:function(a){return e.onCollect(t)}}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteimg(t)}}})],1):e._e()],1)})),1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.page},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.onchangepage}}),a("el-dialog",{attrs:{title:"上传素材",visible:e.dialogVisible,"modal-append-to-body":!1,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"http://ttapi.research.itcast.cn/mp/v1_0/user/images",headers:e.upload,name:"image",multiple:"","show-file-list":!1,"on-success":e.onUploadSuccess}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1)}),ge=[],he=(a("4160"),a("159b"),{name:"",components:{},props:{isShowadd:{type:Boolean,default:!0},isShowactive:{type:Boolean,default:!0},isShowSelected:{type:Boolean,default:!1}},data:function(){return{collect:!1,images:[],dialogVisible:!1,upload:{},total:0,pageSize:10,page:1,select:null}},computed:{},watch:{},created:function(){this.logimages(1,!1)},mounted:function(){},methods:{logimages:function(e){var t=this;ce({collect:this.collect,page:e,per_page:18}).then((function(e){e.data.data.results.forEach((function(e){e.isloading=!1})),t.pageSize=e.data.data.per_page,t.total=e.data.data.total_count,t.images=e.data.data.results}))},onCollectChange:function(){this.logimages()},handleClose:function(){this.dialogVisible=!1},onUploadSuccess:function(){this.dialogVisible=!1,this.logimages(),this.$message({type:"success",message:"上传成功"})},onchangepage:function(e){this.logimages(e,this.collect)},onCollect:function(e){e.isloading=!0,ue(e.id,!e.is_collected).then((function(t){e.is_collected=!e.is_collected,e.isloading=!1}))},deleteimg:function(e){var t=this;e.loading=!0,de(e.id).then((function(a){t.$message({type:"success",message:"删除成功"}),e.loading=!1,t.logimages(t.page)}))}}}),ve=he,be=(a("e766"),Object(l["a"])(ve,fe,ge,!1,null,"6836c6d6",null)),_e=be.exports,we={name:"uoload",components:{"image-a":_e},props:["value"],data:function(){return{dialogVisible:!1,activeName:"second",isloding:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onphoto:function(){var e=this.$refs.file.files[0],t=window.URL.createObjectURL(e);this.$refs["preview-imag"].src=t},showCoverSelect:function(){this.dialogVisible=!0},oncover:function(){var e=this;if(this.isloding=!0,console.log(this.activeName),"second"===this.activeName){var t=this.$refs.file.files[0];if(!t)return this.$message("请选择文件"),!1;var a=new FormData;a.append("image",t),le(a).then((function(t){e.dialogVisible=!1,e.$refs["cover-img"].src=t.data.data.url,e.$emit("input",t.data.data.url),e.isloding=!1}))}else if("first"===this.activeName){var n=this.$refs.imagelist,i=n.select;if(this.isloding=!1,null===i)return this.$message("请选择文件"),!1;this.dialogVisible=!1,console.log(n.images[i]),this.$emit("input",n.images[i].url)}}}},ye=we,xe=(a("9b7d"),Object(l["a"])(ye,pe,me,!1,null,"0dff91b6",null)),Ce=xe.exports,$e=(a("7eef"),a("4ccc")),ke={name:"publiindex",components:{"el-tiptap":$e["f"],"upload-cover":Ce},props:{},data:function(){return{Activechannels:[],active:{title:"",content:"",cover:{type:0,images:[]},channel_id:null},extensions:[new $e["e"],new $e["E"],new $e["v"],new $e["k"],new $e["b"],new $e["q"],new $e["z"],new $e["L"],new $e["s"],new $e["o"]({uploadRequest:function(e){var t=new FormData;return t.append("image",e),le(t).then((function(e){return e.data.data.url}))}}),new $e["n"],new $e["d"],new $e["a"],new $e["t"],new $e["c"],new $e["u"],new $e["I"],new $e["J"],new $e["F"],new $e["p"],new $e["r"],new $e["m"],new $e["j"],new $e["K"],new $e["l"],new $e["A"],new $e["C"],new $e["B"],new $e["D"],new $e["h"],new $e["G"],new $e["H"],new $e["w"],new $e["x"],new $e["i"],new $e["y"],new $e["g"]],forRules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:5,max:30,message:"长度5-30个字符",trigger:"blur"}],content:[{validator:function(e,t,a){"<p></p>"===t?a(new Error("请输入文章内容")):a()}},{required:!0,message:"请选择文章内容",trigger:"blur"}],channel_id:[{required:!0,message:"请选择文章频道",trigger:"blur"}]}}},computed:{},watch:{},created:function(){this.logetActivechannels(),this.$route.query.id&&this.loadjiazai(this.$route.query.id)},mounted:function(){},methods:{logetActivechannels:function(){var e=this;W().then((function(t){e.Activechannels=t.data.data.channels}))},fabiao:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs["publish-form"].validate((function(a){if(a){var n=e.$route.query.id;n?Z(n,e.active,t).then((function(a){e.$message({message:"".concat(t?"存入草稿":"发布","成功"),type:"success"}),e.$router.push("/active")})):Y(e.active,t).then((function(a){e.$message({message:"".concat(t?"存入草稿":"发布","成功"),type:"success"}),e.$router.push("/active")}))}}))},loadjiazai:function(e){var t=this;ee(e).then((function(e){t.active=e.data.data}))},onupload:function(e,t){this.active.cover.images[e]=t}}},Se=ke,je=Object(l["a"])(Se,se,re,!1,null,"f5faf414",null),Oe=je.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("素材管理")])],1)],1),a("image-g")],1)],1)},ze=[],Ae={name:"imagess",components:{"image-g":_e},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},Te=Ae,Ve=(a("49fd"),Object(l["a"])(Te,Ee,ze,!1,null,"4bc84e41",null)),De=Ve.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("评论管理")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table,stripe:""}},[a("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),a("el-table-column",{attrs:{prop:"total_comment_count",label:"总评论数",width:"180"}}),a("el-table-column",{attrs:{prop:"fans_comment_count",label:"粉丝评论数"}}),a("el-table-column",{attrs:{prop:"address",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.comment_status?"正常":"关闭")+" ")]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66",disabled:t.row.statusDisabled,"inactive-color":"#ff4949"},on:{change:function(a){return e.onchangkg(t.row)}},model:{value:t.row.comment_status,callback:function(a){e.$set(t.row,"comment_status",a)},expression:"scope.row.comment_status"}})]}}])})],1),a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":e.pageSize,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total_count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},Pe=[],Ue={name:"plgl",components:{},props:{},data:function(){return{table:[],pageSize:10,page:1,total_count:0}},computed:{},watch:{},created:function(){this.getpl(1,this.pageSize)},mounted:function(){},methods:{handleSizeChange:function(e){this.getpl(1,e)},handleCurrentChange:function(e){this.getpl(e)},getpl:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Q({response_type:"comment",page:t,per_page:this.pageSize}).then((function(t){console.log(t),e.total_count=t.data.data.total_count,t.data.data.results.forEach((function(e){e.statusDisabled=!1})),e.table=t.data.data.results}))},onchangkg:function(e){var t=this;e.statusDisabled=!0,te(e.id.toString(),e.comment_status).then((function(a){e.statusDisabled=!1,t.$message({type:"success",message:e.comment_status?"开启文章评论状态":"关闭文章评论状态"})}))}}},Re=Ue,qe=Object(l["a"])(Re,Le,Pe,!1,null,"045a5e7a",null),Ne=qe.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("个人设置")])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"formName",attrs:{rules:e.rules,model:e.user,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"编号"}},[e._v(" "+e._s(e.user.id)+" ")]),a("el-form-item",{attrs:{label:"手机"}},[e._v(" "+e._s(e.user.mobile)+" ")]),a("el-form-item",{attrs:{label:"媒体名称",prop:"name"}},[a("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),a("el-form-item",{attrs:{label:"媒体介绍"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.user.intro,callback:function(t){e.$set(e.user,"intro",t)},expression:"user.intro"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("el-form-item",[a("el-button",{attrs:{loading:e.isload,type:"primary"},on:{click:e.updateUser}},[e._v("保存")])],1)],1)],1),a("el-col",{attrs:{offset:4,span:4}},[[a("label",{attrs:{for:"file"}},[a("el-avatar",{attrs:{shape:"square",size:200,src:e.user.photo}}),a("p",[e._v("点击修改头像")])],1),a("input",{ref:"file",attrs:{type:"file",hidden:"",id:"file"},on:{change:e.onchangetx}})]],2)],1),a("el-dialog",{attrs:{title:"修改头像",visible:e.dialogVisible,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.cjtx,closed:e.gbcj}},[a("div",[a("img",{ref:"touxiang",staticClass:"touxiang",attrs:{src:e.tupian}})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.isload},on:{click:e.onUpdate}},[e._v("确 定")])],1)])],1)},Ie=[],Me=(a("6107"),a("bab4")),He=a.n(Me),Ge={name:"user",components:{},props:{},data:function(){return{user:{email:"",id:null,intro:"",mobile:"",name:"",photo:""},dialogVisible:!1,tupian:"",cropper:"",isload:!1,rules:{name:[{required:!0,message:"请输入媒体名称",trigger:"blur"},{min:3,max:7,message:"长度在 3 到 7 个字符",trigger:"blur"}]}}},computed:{},watch:{},created:function(){this.loginuser()},mounted:function(){},methods:{loginuser:function(){var e=this;y().then((function(t){e.user=t.data.data}))},onchangetx:function(){var e=this.$refs.file,t=window.URL.createObjectURL(e.files[0]);this.tupian=t,this.dialogVisible=!0,this.$refs.file.value=""},cjtx:function(){var e=this.$refs.touxiang;this.cropper=new He.a(e,{viewMode:1,dragMode:"none",aspectRatio:1,cropBoxResizable:!1,movable:!0,crop:function(e){}})},gbcj:function(){this.cropper.destroy()},onUpdate:function(){var e=this;this.isload=!0,this.cropper.getCroppedCanvas().toBlob((function(t){var a=new FormData;a.append("photo",t),x(a).then((function(a){e.dialogVisible=!1,e.user.photo=window.URL.createObjectURL(t),e.$message({type:"success",message:"更新头像成功"}),e.isload=!1,I.$emit("user",e.user)}))}))},updateUser:function(){var e=this;this.$refs.formName.validate((function(t){if(!t)return e.$message({type:"success",message:"请输入正确得信息"}),!1;e.isload=!0,C(e.user).then((function(t){e.$message({type:"success",message:"保存成功"}),e.isload=!1,I.$emit("user",e.user)}))}))}}},Je=Ge,Fe=(a("d89e"),Object(l["a"])(Je,Be,Ie,!1,null,"1e7cf591",null)),Ke=Fe.exports,Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"main",staticStyle:{width:"600px",height:"400px"}})])},We=[],Xe=a("313e"),Ye=a.n(Xe),Ze={name:"",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){var e=Ye.a.init(this.$refs.main),t={title:{text:"ECharts 入门示例"},tooltip:{},legend:{data:["销量"]},xAxis:{data:["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]},yAxis:{},series:[{name:"销量",type:"bar",data:[5,20,36,10,10,20]}]};e.setOption(t)},methods:{}},et=Ze,tt=Object(l["a"])(et,Qe,We,!1,null,"fb1becf0",null),at=tt.exports;n["default"].use(d["a"]);var nt=[{path:"/login",name:"login",component:j},{path:"/",component:J,children:[{path:"",name:"home",component:V},{path:"/active",name:"active",component:oe},{path:"/publish",name:"publish",component:Oe},{path:"/image",name:"image",component:De},{path:"/commit",name:"comment",component:Ne},{path:"/setting",name:"setting",component:Ke},{path:"/fans",name:"fans",component:at}]}],it=new d["a"]({routes:nt}),ot=JSON.parse(window.localStorage.getItem("user"));it.beforeEach((function(e,t,a){"/login"!==e.path?ot?a():a("/login"):a()}));var st=it,rt=a("5c96"),lt=a.n(rt);a("0fae"),a("a4b18");n["default"].config.productionTip=!1,n["default"].use(lt.a),new n["default"]({router:st,render:function(e){return e(u)}}).$mount("#app")},6323:function(e,t,a){},"9b7d":function(e,t,a){"use strict";var n=a("6323"),i=a.n(n);i.a},a4b18:function(e,t,a){},c825:function(e,t,a){},cada:function(e,t,a){},d89e:function(e,t,a){"use strict";var n=a("f36a"),i=a.n(n);i.a},e766:function(e,t,a){"use strict";var n=a("06d1"),i=a.n(n);i.a},e77f:function(e,t,a){},f36a:function(e,t,a){},f9b2:function(e,t,a){"use strict";var n=a("c825"),i=a.n(n);i.a},fc03:function(e,t,a){"use strict";var n=a("e77f"),i=a.n(n);i.a}});
//# sourceMappingURL=app.5e5da3d3.js.map